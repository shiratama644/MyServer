### 1. 外部アクセスとルーティング

-   **基本戦略:** 取得したDDNSホスト名 (`shiratama.mydns.jp`) をNginxがURLのパスに応じて各サイト/サービスにリクエストを振り分ける（パスベースルーティング）。
-   **例外:** `seitokai`のみ別のDDNSホスト名 (`nachu-seitokai.mydns.jp`) を使用する。
-   **DDNS自動更新:** `cron`とシェルスクリプトを利用し、2時間ごとにMyDNS.jpへグローバルIPアドレスを自動通知する。実行ログはファイルに保存し、`admin`サイトから閲覧可能にする。
-   **ポートフォワーディング:** ルーターにて、外部からの `TCP:80` (HTTP) および `TCP:443` (HTTPS) へのアクセスを、本サーバーのNginxに転送する。
#### 2. ディレクトリ構造

```
vmbr0: 内部通信
|- C++ゲームサーバー (KVM)
|- データベースサーバー (KVM)
\- Redisキャッシュサーバー (LXC)

vmbr1: 外部通信
|- 

/home/your_user/
├── srv/
│   ├── cpp-game-server/   # C++
│   ├── database/          # PostgreSQL
│   ├── redis/    # キャッシュサーバー
│   ├── youtube-proxy/
│   │   ├── frontend/   # Next.js
│   │   └── backend/    # Express.js
│   ├── seitokai/       # Next.js (API Routes)
│   ├── 3d-fps/
│   │   ├── frontend/    # Next.js
│   │   └── web-server/  # Express.js
│   ├── portfolio/      # Next.js (Static Export)
│   ├── discord-chat/
│   │   ├── frontend/   # Next.js
│   │   └── backend/    # Express.js
│   ├── cpu-ranking/    # Next.js (API Routes)
│   ├── admin/
│   │   ├── frontend/   # Next.js
│   │   └── backend/    # Express.js
│   └── discord-bot/    # Node.js
├── scripts/
│   └── update-mydns.sh # DDNS自動更新スクリプト
└── logs/
    └── mydns_update.log  # DDNS自動更新ログ
```